(this["webpackJsonpricky-and-morty"]=this["webpackJsonpricky-and-morty"]||[]).push([[0],{36:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),s=n(18),i=n.n(s),l=n(9),u=n(21),o=n(11),d=n(10),j=n.n(d),b=n(13),f={ERROR_CODE:{SERVER:/^5[0-9]{2}$/,REQUEST:/^4[0-9]{2}$/},handleResponse:function(e){return e.json().then((function(t){return!e.ok||t.errors?Promise.reject(function(e,t){var n=e.statusText;return{statusCode:e.status,statusText:n,errors:t.errors.map((function(e){return e.message}))}}(e,t)):Promise.resolve(t)}))}},p={"Content-Type":"application/json"},h=function(e,t){var n={method:"POST",headers:p,body:JSON.stringify({query:e,variables:t})};return fetch("https://rickandmortyapi.com/graphql",n).then(f.handleResponse)},O=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("\nquery getCharacter($id: ID!) {\n    character(id: $id) {\n      id\n      image\n      name\n      species\n      gender\n      status\n      location {\n        name\n      }\n      episode {\n        episode\n        name\n      }\n    }\n  }\n",{id:t});case 2:return n=e.sent,e.abrupt("return",n.data.character);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,a,r,c,s,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.page,a=t.filter,e.next=3,h("\nquery getCharacters($page: Int, $filter: FilterCharacter) {\n    characters(page: $page, filter: $filter) {\n      info {\n        count\n        next\n        pages\n        prev\n      }\n      results {\n        id\n        image\n        name\n        species\n      }\n    }\n  }\n",{page:n,filter:a});case 3:return r=e.sent,c=r.data.characters,s=c.results,i=c.info,e.abrupt("return",{results:s,info:i});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x={get:O,getPage:m};!function(e){e.idle="idle",e.pending="pending",e.fulfilled="fulfilled",e.rejected="rejected"}(a||(a={}));var v,g,y=Object(o.b)("characters/fetchCharacters",function(){var e=Object(b.a)(j.a.mark((function e(t,n){var a,r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.page,r=t.filter,e.prev=1,e.next=4,x.getPage({page:a,filter:r});case 4:return c=e.sent,e.abrupt("return",c);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",n.rejectWithValue(e.t0));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()),_=Object(o.c)({name:"characters",initialState:{data:[],status:a.idle,info:null,error:null},reducers:{},extraReducers:function(e){e.addCase(y.pending,(function(e){e.status=a.pending})),e.addCase(y.fulfilled,(function(e,t){e.status=a.fulfilled,e.data=t.payload.results,e.info=t.payload.info})),e.addCase(y.rejected,(function(e,t){e.status=a.rejected,e.error=t.payload,e.data=[],e.info=null}))}}),N=function(e){return e.characters},w=_.reducer,E=Object(o.b)("detail/fetchDetail",function(){var e=Object(b.a)(j.a.mark((function e(t,n){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.get(t);case 3:return a=e.sent,e.abrupt("return",a);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",n.rejectWithValue(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()),C=Object(o.c)({name:"detail",initialState:{data:null,status:a.idle,error:null},reducers:{},extraReducers:function(e){e.addCase(E.pending,(function(e){e.status=a.pending,e.data=null,e.error=null})),e.addCase(E.fulfilled,(function(e,t){e.status=a.fulfilled,e.data=t.payload})),e.addCase(E.rejected,(function(e,t){e.status=a.rejected,e.error=t.payload,e.data=null}))}}),k=function(e){return e.detail},S=C.reducer,R=Object(o.c)({name:"characters",initialState:{isDataError:!1,messages:[]},reducers:{},extraReducers:function(e){e.addMatcher((function(e){return e.type.endsWith("/rejected")}),(function(e,t){e.isDataError=f.ERROR_CODE.REQUEST.test(t.statusCode),e.messages=t.payload.errors})).addMatcher((function(e){return e.type.endsWith("/pending")||e.type.endsWith("/fulfilled")}),(function(e){e.isDataError=!1,e.messages=[]}))}}),P=function(e){return e.errors},D={characters:w,detail:S,errors:R.reducer},I=Object(o.a)({reducer:D}),$=n(2),M=n(14),F=n(20),T=n(12),B=n(15),U=(n(36),n(1)),W=["className","name","type"],q=function(e){var t=e.className,n=void 0===t?"":t,a=e.name,r=e.type,c=void 0===r?"text":r,s=Object(B.a)(e,W);return Object(U.jsx)("input",Object(T.a)({className:"input ".concat(n),type:c,name:a,id:a},s))},G=["className","onSubmit"],J=function(e){var t=e.className,n=void 0===t?"":t,a=e.onSubmit,c=Object(B.a)(e,G),s=Object(r.useState)(""),i=Object(M.a)(s,2),l=i[0],u=i[1],o=function(e){e.preventDefault(),a&&a(l)};return Object(U.jsx)("form",{className:n,onSubmit:o,children:Object(U.jsx)(q,Object(T.a)(Object(T.a)({},c),{},{type:"search",value:l,onChange:function(e){var t=e.target.value;u(t)},onBlur:o}))})},V=(n(38),["children","className","type"]),A=function(e){var t=e.children,n=e.className,a=e.type,r=void 0===a?"button":a,c=Object(B.a)(e,V);return Object(U.jsx)("button",Object(T.a)(Object(T.a)({type:r},c),{},{className:"button ".concat(n),children:t}))},Q=["title","titleId"];function z(){return z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},z.apply(this,arguments)}function X(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Z(e,t){var n=e.title,a=e.titleId,c=X(e,Q);return r.createElement("svg",z({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"100%",height:"100%",viewBox:"2 0 16 24",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,v||(v=r.createElement("defs",null,r.createElement("filter",{id:"Path_2419",x:0,y:0,width:19.763,height:28,filterUnits:"userSpaceOnUse"},r.createElement("feOffset",{dy:2,input:"SourceAlpha"}),r.createElement("feGaussianBlur",{stdDeviation:2,result:"blur"}),r.createElement("feFlood",{floodColor:"#00003d",floodOpacity:.478}),r.createElement("feComposite",{operator:"in",in2:"blur"}),r.createElement("feComposite",{in:"SourceGraphic"})))),g||(g=r.createElement("g",null,r.createElement("path",{id:"Path_2419-2","data-name":"Path 2419",d:"M454.974,1339.208a1.06,1.06,0,0,1-.822-.391l-5.647-6.939a1.061,1.061,0,0,1,0-1.337l5.647-6.944a1.059,1.059,0,0,1,1.642,1.337l-5.1,6.276,5.1,6.271a1.058,1.058,0,0,1-.82,1.727Z",transform:"translate(-442.27 -1319.21)"}))))}var H=r.forwardRef(Z),K=(n.p,n(39),function(e){var t=e.totalPages,n=e.currentPage,a=e.changePage,c=Object(r.useState)(n),s=Object(M.a)(c,2),i=s[0],l=s[1];if(Object(r.useEffect)((function(){l(n)}),[n]),!t)return null;return Object(U.jsxs)("div",{className:"pagination",children:[Object(U.jsx)("div",{children:Object(U.jsx)(A,{onClick:function(){n<=1||a(n-1)},children:Object(U.jsx)(H,{className:"pagination__arrow"})})}),Object(U.jsxs)("div",{className:"pagination__pages",children:[Object(U.jsx)(q,{type:"number",value:i,onChange:function(e){var n=e.target.value,a=parseInt(n,10);a<1||a>t||l(a)},onBlur:function(){i?a(i):l(n)}}),Object(U.jsx)("span",{children:"/"}),Object(U.jsx)("span",{children:t})]}),Object(U.jsx)("div",{children:Object(U.jsx)(A,{onClick:function(){n>=t||a(n+1)},children:Object(U.jsx)(H,{className:"pagination__arrow pagination__arrow--right"})})})]})}),L=function(e){var t=e.page,n=void 0===t?1:t,a=e.filter,c=Object(l.b)(),s=Object(l.c)(N),i=s.status,u=s.data,o=s.error,d=s.info;return Object(r.useEffect)((function(){c(y({page:n,filter:a}))}),[n,a]),{status:i,data:u,error:o,info:d}},Y=(n(40),function(e){var t=e.id,n=e.image,a=e.name,r=e.species;return Object(U.jsxs)(u.b,{className:"character",to:"/ricky-and-morty/detail/".concat(t),children:[Object(U.jsx)("img",{src:n,alt:a,loading:"lazy"}),Object(U.jsxs)("div",{className:"character__label",children:[Object(U.jsx)("span",{className:"character__name",children:a}),Object(U.jsx)("span",{className:"character__species",children:r})]})]},t)}),ee=(n(42),function(e){var t=e.message,n=void 0===t?"No results":t;return Object(U.jsx)("div",{className:"no-results",children:n})}),te=function(e){var t=e.characters;return Object(U.jsx)(U.Fragment,{children:(null===t||void 0===t?void 0:t.length)?t.map((function(e){return Object(U.jsx)(Y,Object(T.a)({},e),e.id)})):Object(U.jsx)(ee,{})})},ne=(n(43),function(){var e=Array.from({length:20});return Object(U.jsx)(U.Fragment,{children:e.map((function(e){return Object(U.jsx)("div",{className:"placeholderItem"})}))})}),ae=(n(44),function(){var e=Object(r.useState)(1),t=Object(M.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(""),i=Object(M.a)(s,2),l=i[0],u=i[1],o=Object(r.useMemo)((function(){return{name:l}}),[l]),d=L({filter:o,page:n}),j=d.status,b=d.data,f=d.info,p=[a.idle,a.pending].includes(j);return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(F.a,{children:Object(U.jsx)("title",{children:"R&M | Characters"})}),Object(U.jsxs)("div",{className:"characters",children:[Object(U.jsxs)("div",{className:"characters__topbar",children:[Object(U.jsx)(J,{className:"characters__search",placeholder:"Search...",onSubmit:u}),Object(U.jsx)(K,{totalPages:null===f||void 0===f?void 0:f.pages,currentPage:n,changePage:c})]}),Object(U.jsx)("div",{className:"characters__grid",children:p?Object(U.jsx)(ne,{}):Object(U.jsx)(te,{characters:b})})]})]})}),re="/ricky-and-morty",ce="/ricky-and-morty/detail/:id",se="/ricky-and-morty/error",ie=function(e){var t=Object(l.b)(),n=Object(l.c)(k),a=n.status,c=n.data,s=n.error;return Object(r.useEffect)((function(){t(E(e))}),[e]),{status:a,data:c,error:s}},le="name",ue="species",oe="gender",de="status",je={name:"location name"},be={episode:"episode",name:"name"},fe=(n(45),function(e){var t=e.episode;return Object(U.jsxs)("ul",{className:"episodes",children:[Object(U.jsx)("div",{className:"episodes__label",children:be.episode}),t.map((function(e){return Object(U.jsxs)("li",{className:"episode",children:[Object(U.jsx)("span",{className:"episode__name",children:e.name}),Object(U.jsx)("span",{className:"episode__number",children:e.episode})]})}))]})}),pe=(n(46),function(e){var t=e.label,n=e.value;return Object(U.jsxs)("div",{className:"detail-panel",children:[Object(U.jsx)("span",{className:"detail-panel__label",children:t}),Object(U.jsx)("span",{className:"detail-panel__value",children:n})]})}),he=(n(47),function(){var e=Object($.f)().push,t=Object($.g)().id,n=ie(t).data;return n?Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(F.a,{children:Object(U.jsx)("title",{children:"R&M | ".concat(n.name)})}),Object(U.jsxs)("div",{className:"detail-view",children:[Object(U.jsx)("div",{className:"detail-view__topbar",children:Object(U.jsx)(A,{type:"button",onClick:function(){return e(re)},children:Object(U.jsx)(H,{className:"detail-view__arrow"})})}),Object(U.jsxs)("div",{className:"detail-view__description",children:[Object(U.jsx)("div",{className:"detail-view__image",children:Object(U.jsx)("img",{src:n.image,alt:""})}),Object(U.jsx)(pe,{label:le,value:n.name}),Object(U.jsx)(pe,{label:oe,value:n.gender}),Object(U.jsx)(pe,{label:ue,value:n.species}),Object(U.jsx)(pe,{label:de,value:n.status}),Object(U.jsx)(pe,{label:je.name,value:n.location.name})]}),Object(U.jsx)("div",{className:"detail-view__episodes",children:Object(U.jsx)(fe,{episode:n.episode})})]})]}):null}),Oe=(n(48),function(){var e=Object(l.c)(P).messages,t=Object($.f)().push,n=function(){t(re)};return Object(r.useEffect)((function(){e.length||n()}),[e]),Object(U.jsxs)("div",{className:"error-page",children:[Object(U.jsx)("strong",{className:"error-page__header",children:"Ups! Something went wrong :("}),Object(U.jsxs)("div",{className:"error-page__details",children:["Details:",Object(U.jsx)("ul",{children:e.map((function(e){return Object(U.jsx)("li",{children:e})}))})]}),Object(U.jsxs)("div",{children:[Object(U.jsx)("button",{type:"button",onClick:n,children:"Go to home page"}),Object(U.jsx)("a",{href:"mailto:mkokosinski91@gmail.com",children:"Contact us"})]})]})}),me=function(){var e=Object($.f)().push,t=Object(l.c)(P);Object(r.useEffect)((function(){t.isDataError&&e(se)}),[t])},xe=function(){return me(),Object(U.jsxs)($.c,{children:[Object(U.jsx)($.a,{path:ce,children:Object(U.jsx)(he,{})}),Object(U.jsx)($.a,{path:se,children:Object(U.jsx)(Oe,{})}),Object(U.jsx)($.a,{path:re,children:Object(U.jsx)(ae,{})}),Object(U.jsx)($.a,{path:"/",children:Object(U.jsx)(ae,{})})]})};n(49);i.a.render(Object(U.jsx)(c.a.StrictMode,{children:Object(U.jsx)(u.a,{children:Object(U.jsx)(l.a,{store:I,children:Object(U.jsx)(xe,{})})})}),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.64c3cac0.chunk.js.map